(()=>{var e={};e.id=405,e.ids=[405,660],e.modules={745:(e,t,r)=>{"use strict";function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let n=r(167),a=r(997),l=n._(r(689)),o=r(642);async function s(e){let{Component:t,ctx:r}=e;return{pageProps:await (0,o.loadGetInitialProps)(t,r)}}class u extends l.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,a.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var i,n;i=t,n=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t))}}u.origGetInitialProps=s,u.getInitialProps=s,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},69:e=>{e.exports={marksList:"index_marksList__w37bI",selected:"index_selected__nzF4q"}},892:(e,t,r)=>{"use strict";r.r(t),r.d(t,{config:()=>w,default:()=>h,getServerSideProps:()=>k,getStaticPaths:()=>O,getStaticProps:()=>j,reportWebVitals:()=>A,routeModule:()=>D,unstable_getServerProps:()=>$,unstable_getServerSideProps:()=>G,unstable_getStaticParams:()=>E,unstable_getStaticPaths:()=>I,unstable_getStaticProps:()=>q});var i={};r.r(i),r.d(i,{default:()=>_,getServerSideProps:()=>x});var n=r(93),a=r(244),l=r(323),o=r(367),s=r.n(o),u=r(745),c=r.n(u);require("antd/lib/table/style");let d=require("antd/lib/table");var p=r.n(d);require("antd/lib/select/style");let m=require("antd/lib/select");var f=r.n(m),b=r(689);let g=require("mongodb");var P=r(69),v=r.n(P),y=r(997);let S=[{title:"ID",key:"id",dataIndex:"ID"},{title:"Марка/модель",key:"mark",dataIndex:"mark"},{title:"Модификация",key:"mode",dataIndex:"mode"},{title:"Комплектация",key:"equipment",dataIndex:"equipment"},{title:"Стоимость",key:"price",dataIndex:"price"}];async function x(){let e=new g.MongoClient("mongodb://hrTest:hTy785JbnQ5@mongo0.maximum.expert:27423/?authSource=hrTest&replicaSet=ReplicaSet&readPreference=primary");await e.connect();let t=e.db("hrTest").collection("stock"),r=await t.aggregate([{$group:{_id:"$mark",count:{$sum:1}}}]).toArray(),i=await t.find({}).toArray();return await e.close(),{props:{data:JSON.parse(JSON.stringify(i)),counts:r}}}let _=({data:e,counts:t})=>{let{0:r,1:i}=(0,b.useState)({current:1,pageSize:10}),{0:n,1:a}=(0,b.useState)(!1),{0:l,1:o}=(0,b.useState)([]),s=e.filter(e=>n===e.mark||!n),u=[];s.forEach(e=>{e.model&&!u.includes(e.model)&&u.push(e.model)});let c=u.map(e=>({value:e,label:e})),d=(s=s.filter(e=>l.includes(e.model)||0==l.length)).map(e=>({ID:e._id,mark:`${e.mark} ${e.model?e.model:""}`,key:e._id,mode:`${e.engine.volume.toFixed(1)} ${e.engine.transmission} (${e.engine.power} л.с.) ${e.drive}`,equipment:e.equipmentName,price:`${e.price.toLocaleString("ru-RU")} ₽`}));return y.jsx("div",{children:(0,y.jsxs)("div",{children:[y.jsx("div",{className:v().marksList,children:t.map(e=>(0,y.jsxs)("div",{children:[y.jsx("button",{className:n===e._id?v().selected:null,onClick:()=>{a(t=>t!==e._id&&e._id),o([])},children:e._id}),y.jsx("span",{children:e.count})]},e._id))}),y.jsx("div",{style:{marginBottom:"10px"},children:"Модель:"}),y.jsx(f(),{mode:"multiple",style:{width:"200px",marginBottom:"10px"},placeholder:"Please select",options:c.map(e=>({label:e.label,value:e.value})),value:l,onChange:e=>{o(e)}}),y.jsx(p(),{columns:S,dataSource:d,pagination:r,onChange:e=>{i(e)}})]})})},h=(0,l.l)(i,"default"),j=(0,l.l)(i,"getStaticProps"),O=(0,l.l)(i,"getStaticPaths"),k=(0,l.l)(i,"getServerSideProps"),w=(0,l.l)(i,"config"),A=(0,l.l)(i,"reportWebVitals"),q=(0,l.l)(i,"unstable_getStaticProps"),I=(0,l.l)(i,"unstable_getStaticPaths"),E=(0,l.l)(i,"unstable_getStaticParams"),$=(0,l.l)(i,"unstable_getServerProps"),G=(0,l.l)(i,"unstable_getServerSideProps"),D=new n.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:c(),Document:s()},userland:i})},244:(e,t)=>{"use strict";var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},17:e=>{"use strict";e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[367],()=>r(892));module.exports=i})();